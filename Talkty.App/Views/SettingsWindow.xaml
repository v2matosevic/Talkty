<Window x:Class="Talkty.App.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:models="clr-namespace:Talkty.App.Models"
        Title="Settings"
        Height="720"
        Width="420"
        WindowStartupLocation="CenterOwner"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="NoResize">

    <Border Background="{StaticResource Zinc950Brush}"
            CornerRadius="12"
            BorderBrush="{StaticResource Zinc800Brush}"
            BorderThickness="1">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="48"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Custom Title Bar -->
            <Grid Grid.Row="0" Background="Transparent" MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <TextBlock Text="Settings"
                           Foreground="{StaticResource Zinc200Brush}"
                           FontSize="14"
                           FontWeight="Medium"
                           VerticalAlignment="Center"
                           Margin="20,0,0,0"/>

                <Button Style="{StaticResource IconButton}"
                        Click="CloseButton_Click"
                        ToolTip="Close"
                        HorizontalAlignment="Right"
                        Margin="0,0,12,0">
                    <Path Data="M4,4 L20,20 M20,4 L4,20"
                          Stroke="{StaticResource Zinc500Brush}"
                          StrokeThickness="1.5"
                          Width="10" Height="10"
                          Stretch="Uniform"/>
                </Button>
            </Grid>

            <!-- Content -->
            <ScrollViewer Grid.Row="1"
                          VerticalScrollBarVisibility="Auto"
                          Padding="0">
                <StackPanel Margin="20,0,20,20">

                    <!-- LOW-END PCs -->
                    <TextBlock Text="LOW-END PCs (4GB RAM)" FontSize="10" FontWeight="SemiBold" Foreground="{StaticResource Zinc600Brush}" Margin="0,0,0,10"/>
                    <Border Background="{StaticResource Zinc900Brush}" CornerRadius="10" Margin="0,0,0,12">
                        <StackPanel>
                            <!-- Tiny -->
                            <Border Padding="14,10" CornerRadius="10,10,0,0" Cursor="Hand" MouseLeftButtonUp="TinyProfile_Click">
                                <Border.Style>
                                    <Style TargetType="Border">
                                        <Setter Property="Background" Value="Transparent"/>
                                        <Style.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True"><Setter Property="Background" Value="{StaticResource Zinc800Brush}"/></Trigger>
                                            <DataTrigger Binding="{Binding SelectedProfile}" Value="{x:Static models:ModelProfile.Tiny}"><Setter Property="Background" Value="{StaticResource Zinc800Brush}"/></DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Border.Style>
                                <Grid>
                                    <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions>
                                    <StackPanel>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="Tiny" FontSize="13" Foreground="{StaticResource Zinc100Brush}"/>
                                            <Border Margin="8,0,0,0" Padding="6,2" CornerRadius="4" Visibility="{Binding TinyModelDownloaded, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                <Border.Background><SolidColorBrush Color="#10B981" Opacity="0.2"/></Border.Background>
                                                <TextBlock Text="Downloaded" FontSize="9" Foreground="#10B981"/>
                                            </Border>
                                        </StackPanel>
                                        <TextBlock Text="English only, fastest (75 MB)" FontSize="11" Foreground="{StaticResource Zinc500Brush}" Margin="0,2,0,0"/>
                                    </StackPanel>
                                    <Path Grid.Column="1" Data="M5,12 L9,16 L19,6" Stroke="{StaticResource Zinc100Brush}" StrokeThickness="2" Width="14" Height="14" Stretch="Uniform" VerticalAlignment="Center">
                                        <Path.Style><Style TargetType="Path"><Setter Property="Visibility" Value="Collapsed"/><Style.Triggers><DataTrigger Binding="{Binding SelectedProfile}" Value="{x:Static models:ModelProfile.Tiny}"><Setter Property="Visibility" Value="Visible"/></DataTrigger></Style.Triggers></Style></Path.Style>
                                    </Path>
                                </Grid>
                            </Border>
                            <Border Height="1" Background="{StaticResource Zinc800Brush}" Margin="14,0"/>
                            <!-- Base -->
                            <Border Padding="14,10" CornerRadius="0,0,10,10" Cursor="Hand" MouseLeftButtonUp="BaseProfile_Click">
                                <Border.Style>
                                    <Style TargetType="Border">
                                        <Setter Property="Background" Value="Transparent"/>
                                        <Style.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True"><Setter Property="Background" Value="{StaticResource Zinc800Brush}"/></Trigger>
                                            <DataTrigger Binding="{Binding SelectedProfile}" Value="{x:Static models:ModelProfile.Base}"><Setter Property="Background" Value="{StaticResource Zinc800Brush}"/></DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Border.Style>
                                <Grid>
                                    <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions>
                                    <StackPanel>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="Base" FontSize="13" Foreground="{StaticResource Zinc100Brush}"/>
                                            <Border Margin="8,0,0,0" Padding="6,2" CornerRadius="4" Visibility="{Binding BaseModelDownloaded, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                <Border.Background><SolidColorBrush Color="#10B981" Opacity="0.2"/></Border.Background>
                                                <TextBlock Text="Downloaded" FontSize="9" Foreground="#10B981"/>
                                            </Border>
                                        </StackPanel>
                                        <TextBlock Text="English only, fast (142 MB)" FontSize="11" Foreground="{StaticResource Zinc500Brush}" Margin="0,2,0,0"/>
                                    </StackPanel>
                                    <Path Grid.Column="1" Data="M5,12 L9,16 L19,6" Stroke="{StaticResource Zinc100Brush}" StrokeThickness="2" Width="14" Height="14" Stretch="Uniform" VerticalAlignment="Center">
                                        <Path.Style><Style TargetType="Path"><Setter Property="Visibility" Value="Collapsed"/><Style.Triggers><DataTrigger Binding="{Binding SelectedProfile}" Value="{x:Static models:ModelProfile.Base}"><Setter Property="Visibility" Value="Visible"/></DataTrigger></Style.Triggers></Style></Path.Style>
                                    </Path>
                                </Grid>
                            </Border>
                        </StackPanel>
                    </Border>

                    <!-- MID-RANGE PCs -->
                    <TextBlock Text="MID-RANGE PCs (8GB RAM)" FontSize="10" FontWeight="SemiBold" Foreground="{StaticResource Zinc600Brush}" Margin="0,0,0,10"/>
                    <Border Background="{StaticResource Zinc900Brush}" CornerRadius="10" Margin="0,0,0,12">
                        <StackPanel>
                            <!-- Small -->
                            <Border Padding="14,10" CornerRadius="10,10,0,0" Cursor="Hand" MouseLeftButtonUp="SmallProfile_Click">
                                <Border.Style>
                                    <Style TargetType="Border">
                                        <Setter Property="Background" Value="Transparent"/>
                                        <Style.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True"><Setter Property="Background" Value="{StaticResource Zinc800Brush}"/></Trigger>
                                            <DataTrigger Binding="{Binding SelectedProfile}" Value="{x:Static models:ModelProfile.Small}"><Setter Property="Background" Value="{StaticResource Zinc800Brush}"/></DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Border.Style>
                                <Grid>
                                    <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions>
                                    <StackPanel>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="Small" FontSize="13" Foreground="{StaticResource Zinc100Brush}"/>
                                            <Border Margin="8,0,0,0" Padding="6,2" CornerRadius="4" Visibility="{Binding SmallModelDownloaded, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                <Border.Background><SolidColorBrush Color="#10B981" Opacity="0.2"/></Border.Background>
                                                <TextBlock Text="Downloaded" FontSize="9" Foreground="#10B981"/>
                                            </Border>
                                        </StackPanel>
                                        <TextBlock Text="English only, balanced (466 MB)" FontSize="11" Foreground="{StaticResource Zinc500Brush}" Margin="0,2,0,0"/>
                                    </StackPanel>
                                    <Path Grid.Column="1" Data="M5,12 L9,16 L19,6" Stroke="{StaticResource Zinc100Brush}" StrokeThickness="2" Width="14" Height="14" Stretch="Uniform" VerticalAlignment="Center">
                                        <Path.Style><Style TargetType="Path"><Setter Property="Visibility" Value="Collapsed"/><Style.Triggers><DataTrigger Binding="{Binding SelectedProfile}" Value="{x:Static models:ModelProfile.Small}"><Setter Property="Visibility" Value="Visible"/></DataTrigger></Style.Triggers></Style></Path.Style>
                                    </Path>
                                </Grid>
                            </Border>
                            <Border Height="1" Background="{StaticResource Zinc800Brush}" Margin="14,0"/>
                            <!-- Distil Large v3 -->
                            <Border Padding="14,10" CornerRadius="0,0,10,10" Cursor="Hand" MouseLeftButtonUp="DistilLargeV3Profile_Click">
                                <Border.Style>
                                    <Style TargetType="Border">
                                        <Setter Property="Background" Value="Transparent"/>
                                        <Style.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True"><Setter Property="Background" Value="{StaticResource Zinc800Brush}"/></Trigger>
                                            <DataTrigger Binding="{Binding SelectedProfile}" Value="{x:Static models:ModelProfile.DistilLargeV3}"><Setter Property="Background" Value="{StaticResource Zinc800Brush}"/></DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Border.Style>
                                <Grid>
                                    <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions>
                                    <StackPanel>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="Distil Large v3" FontSize="13" Foreground="{StaticResource Zinc100Brush}"/>
                                            <Border Margin="8,0,0,0" Padding="6,2" CornerRadius="4"><Border.Background><SolidColorBrush Color="#F59E0B" Opacity="0.2"/></Border.Background><TextBlock Text="Best English" FontSize="9" Foreground="#F59E0B"/></Border>
                                            <Border Margin="4,0,0,0" Padding="6,2" CornerRadius="4" Visibility="{Binding DistilLargeV3ModelDownloaded, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                <Border.Background><SolidColorBrush Color="#10B981" Opacity="0.2"/></Border.Background>
                                                <TextBlock Text="Downloaded" FontSize="9" Foreground="#10B981"/>
                                            </Border>
                                        </StackPanel>
                                        <TextBlock Text="English only, fastest Whisper (756 MB)" FontSize="11" Foreground="{StaticResource Zinc500Brush}" Margin="0,2,0,0"/>
                                    </StackPanel>
                                    <Path Grid.Column="1" Data="M5,12 L9,16 L19,6" Stroke="{StaticResource Zinc100Brush}" StrokeThickness="2" Width="14" Height="14" Stretch="Uniform" VerticalAlignment="Center">
                                        <Path.Style><Style TargetType="Path"><Setter Property="Visibility" Value="Collapsed"/><Style.Triggers><DataTrigger Binding="{Binding SelectedProfile}" Value="{x:Static models:ModelProfile.DistilLargeV3}"><Setter Property="Visibility" Value="Visible"/></DataTrigger></Style.Triggers></Style></Path.Style>
                                    </Path>
                                </Grid>
                            </Border>
                        </StackPanel>
                    </Border>

                    <!-- HIGH-END PCs -->
                    <TextBlock Text="HIGH-END PCs (16GB+ RAM, GPU)" FontSize="10" FontWeight="SemiBold" Foreground="{StaticResource Zinc600Brush}" Margin="0,0,0,10"/>
                    <Border Background="{StaticResource Zinc900Brush}" CornerRadius="10" Margin="0,0,0,12">
                        <StackPanel>
                            <!-- Large v3 Turbo -->
                            <Border Padding="14,10" CornerRadius="10,10,0,0" Cursor="Hand" MouseLeftButtonUp="LargeTurboProfile_Click">
                                <Border.Style>
                                    <Style TargetType="Border">
                                        <Setter Property="Background" Value="Transparent"/>
                                        <Style.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True"><Setter Property="Background" Value="{StaticResource Zinc800Brush}"/></Trigger>
                                            <DataTrigger Binding="{Binding SelectedProfile}" Value="{x:Static models:ModelProfile.LargeTurbo}"><Setter Property="Background" Value="{StaticResource Zinc800Brush}"/></DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Border.Style>
                                <Grid>
                                    <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions>
                                    <StackPanel>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="Large v3 Turbo" FontSize="13" Foreground="{StaticResource Zinc100Brush}"/>
                                            <Border Margin="8,0,0,0" Padding="6,2" CornerRadius="4"><Border.Background><SolidColorBrush Color="#8B5CF6" Opacity="0.2"/></Border.Background><TextBlock Text="Recommended" FontSize="9" Foreground="#8B5CF6"/></Border>
                                            <Border Margin="4,0,0,0" Padding="6,2" CornerRadius="4" Visibility="{Binding LargeTurboModelDownloaded, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                <Border.Background><SolidColorBrush Color="#10B981" Opacity="0.2"/></Border.Background>
                                                <TextBlock Text="Downloaded" FontSize="9" Foreground="#10B981"/>
                                            </Border>
                                        </StackPanel>
                                        <TextBlock Text="99+ languages, 6x faster than Large (1.6 GB)" FontSize="11" Foreground="{StaticResource Zinc500Brush}" Margin="0,2,0,0"/>
                                    </StackPanel>
                                    <Path Grid.Column="1" Data="M5,12 L9,16 L19,6" Stroke="{StaticResource Zinc100Brush}" StrokeThickness="2" Width="14" Height="14" Stretch="Uniform" VerticalAlignment="Center">
                                        <Path.Style><Style TargetType="Path"><Setter Property="Visibility" Value="Collapsed"/><Style.Triggers><DataTrigger Binding="{Binding SelectedProfile}" Value="{x:Static models:ModelProfile.LargeTurbo}"><Setter Property="Visibility" Value="Visible"/></DataTrigger></Style.Triggers></Style></Path.Style>
                                    </Path>
                                </Grid>
                            </Border>
                            <Border Height="1" Background="{StaticResource Zinc800Brush}" Margin="14,0"/>
                            <!-- Medium -->
                            <Border Padding="14,10" Cursor="Hand" MouseLeftButtonUp="MediumProfile_Click">
                                <Border.Style>
                                    <Style TargetType="Border">
                                        <Setter Property="Background" Value="Transparent"/>
                                        <Style.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True"><Setter Property="Background" Value="{StaticResource Zinc800Brush}"/></Trigger>
                                            <DataTrigger Binding="{Binding SelectedProfile}" Value="{x:Static models:ModelProfile.Medium}"><Setter Property="Background" Value="{StaticResource Zinc800Brush}"/></DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Border.Style>
                                <Grid>
                                    <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions>
                                    <StackPanel>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="Medium" FontSize="13" Foreground="{StaticResource Zinc100Brush}"/>
                                            <Border Margin="8,0,0,0" Padding="6,2" CornerRadius="4" Visibility="{Binding MediumModelDownloaded, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                <Border.Background><SolidColorBrush Color="#10B981" Opacity="0.2"/></Border.Background>
                                                <TextBlock Text="Downloaded" FontSize="9" Foreground="#10B981"/>
                                            </Border>
                                        </StackPanel>
                                        <TextBlock Text="English only, accurate (1.5 GB)" FontSize="11" Foreground="{StaticResource Zinc500Brush}" Margin="0,2,0,0"/>
                                    </StackPanel>
                                    <Path Grid.Column="1" Data="M5,12 L9,16 L19,6" Stroke="{StaticResource Zinc100Brush}" StrokeThickness="2" Width="14" Height="14" Stretch="Uniform" VerticalAlignment="Center">
                                        <Path.Style><Style TargetType="Path"><Setter Property="Visibility" Value="Collapsed"/><Style.Triggers><DataTrigger Binding="{Binding SelectedProfile}" Value="{x:Static models:ModelProfile.Medium}"><Setter Property="Visibility" Value="Visible"/></DataTrigger></Style.Triggers></Style></Path.Style>
                                    </Path>
                                </Grid>
                            </Border>
                            <Border Height="1" Background="{StaticResource Zinc800Brush}" Margin="14,0"/>
                            <!-- SenseVoice -->
                            <Border Padding="14,10" Cursor="Hand" MouseLeftButtonUp="SenseVoiceProfile_Click">
                                <Border.Style>
                                    <Style TargetType="Border">
                                        <Setter Property="Background" Value="Transparent"/>
                                        <Style.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True"><Setter Property="Background" Value="{StaticResource Zinc800Brush}"/></Trigger>
                                            <DataTrigger Binding="{Binding SelectedProfile}" Value="{x:Static models:ModelProfile.SenseVoice}"><Setter Property="Background" Value="{StaticResource Zinc800Brush}"/></DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Border.Style>
                                <Grid>
                                    <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions>
                                    <StackPanel>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="SenseVoice" FontSize="13" Foreground="{StaticResource Zinc100Brush}"/>
                                            <Border Margin="8,0,0,0" Padding="6,2" CornerRadius="4"><Border.Background><SolidColorBrush Color="#10B981" Opacity="0.2"/></Border.Background><TextBlock Text="Ultra Fast" FontSize="9" Foreground="#10B981"/></Border>
                                            <Border Margin="4,0,0,0" Padding="6,2" CornerRadius="4" Visibility="{Binding SenseVoiceModelDownloaded, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                <Border.Background><SolidColorBrush Color="#10B981" Opacity="0.2"/></Border.Background>
                                                <TextBlock Text="Downloaded" FontSize="9" Foreground="#10B981"/>
                                            </Border>
                                        </StackPanel>
                                        <TextBlock Text="zh/en/ja/ko, 15x faster than Whisper (1 GB)" FontSize="11" Foreground="{StaticResource Zinc500Brush}" Margin="0,2,0,0"/>
                                    </StackPanel>
                                    <Path Grid.Column="1" Data="M5,12 L9,16 L19,6" Stroke="{StaticResource Zinc100Brush}" StrokeThickness="2" Width="14" Height="14" Stretch="Uniform" VerticalAlignment="Center">
                                        <Path.Style><Style TargetType="Path"><Setter Property="Visibility" Value="Collapsed"/><Style.Triggers><DataTrigger Binding="{Binding SelectedProfile}" Value="{x:Static models:ModelProfile.SenseVoice}"><Setter Property="Visibility" Value="Visible"/></DataTrigger></Style.Triggers></Style></Path.Style>
                                    </Path>
                                </Grid>
                            </Border>
                            <Border Height="1" Background="{StaticResource Zinc800Brush}" Margin="14,0"/>
                            <!-- Large v3 -->
                            <Border Padding="14,10" CornerRadius="0,0,10,10" Cursor="Hand" MouseLeftButtonUp="LargeProfile_Click">
                                <Border.Style>
                                    <Style TargetType="Border">
                                        <Setter Property="Background" Value="Transparent"/>
                                        <Style.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True"><Setter Property="Background" Value="{StaticResource Zinc800Brush}"/></Trigger>
                                            <DataTrigger Binding="{Binding SelectedProfile}" Value="{x:Static models:ModelProfile.Large}"><Setter Property="Background" Value="{StaticResource Zinc800Brush}"/></DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Border.Style>
                                <Grid>
                                    <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions>
                                    <StackPanel>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="Large v3" FontSize="13" Foreground="{StaticResource Zinc100Brush}"/>
                                            <Border Margin="8,0,0,0" Padding="6,2" CornerRadius="4" Visibility="{Binding LargeModelDownloaded, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                <Border.Background><SolidColorBrush Color="#10B981" Opacity="0.2"/></Border.Background>
                                                <TextBlock Text="Downloaded" FontSize="9" Foreground="#10B981"/>
                                            </Border>
                                        </StackPanel>
                                        <TextBlock Text="99+ languages, best accuracy (3.1 GB)" FontSize="11" Foreground="{StaticResource Zinc500Brush}" Margin="0,2,0,0"/>
                                    </StackPanel>
                                    <Path Grid.Column="1" Data="M5,12 L9,16 L19,6" Stroke="{StaticResource Zinc100Brush}" StrokeThickness="2" Width="14" Height="14" Stretch="Uniform" VerticalAlignment="Center">
                                        <Path.Style><Style TargetType="Path"><Setter Property="Visibility" Value="Collapsed"/><Style.Triggers><DataTrigger Binding="{Binding SelectedProfile}" Value="{x:Static models:ModelProfile.Large}"><Setter Property="Visibility" Value="Visible"/></DataTrigger></Style.Triggers></Style></Path.Style>
                                    </Path>
                                </Grid>
                            </Border>
                        </StackPanel>
                    </Border>

                    <!-- Download Section - Only visible when selected model not downloaded -->
                    <Border Background="{StaticResource Zinc900Brush}"
                            CornerRadius="10"
                            Padding="14"
                            Margin="0,0,0,20"
                            Visibility="{Binding IsSelectedModelDownloaded, Converter={StaticResource InverseBooleanToVisibilityConverter}}">
                        <StackPanel>
                            <!-- Download prompt when not downloading -->
                            <StackPanel Visibility="{Binding IsDownloading, Converter={StaticResource InverseBooleanToVisibilityConverter}}">
                                <TextBlock Text="Model not downloaded. Download to use this profile."
                                           FontSize="12"
                                           Foreground="{StaticResource Zinc300Brush}"
                                           TextWrapping="Wrap"
                                           Margin="0,0,0,12"/>

                                <Button Style="{StaticResource PrimaryButton}"
                                        Command="{Binding DownloadModelCommand}"
                                        HorizontalAlignment="Left"
                                        Padding="16,10">
                                    <StackPanel Orientation="Horizontal">
                                        <Path Data="M12,4 L12,16 M7,12 L12,17 L17,12 M5,20 L19,20"
                                              Stroke="{StaticResource Zinc950Brush}"
                                              StrokeThickness="2"
                                              Width="14" Height="14"
                                              Stretch="Uniform"
                                              Margin="0,0,8,0"/>
                                        <TextBlock Text="Download Model" FontSize="12"/>
                                    </StackPanel>
                                </Button>
                            </StackPanel>

                            <!-- Download progress when downloading -->
                            <StackPanel Visibility="{Binding IsDownloading, Converter={StaticResource BooleanToVisibilityConverter}}">
                                <!-- Progress bar -->
                                <Grid Height="6" Margin="0,0,0,10">
                                    <Border CornerRadius="3" Background="{StaticResource Zinc800Brush}"/>
                                    <Border CornerRadius="3" HorizontalAlignment="Left">
                                        <Border.Width>
                                            <MultiBinding Converter="{StaticResource PercentageWidthConverter}">
                                                <Binding Path="DownloadProgress"/>
                                                <Binding RelativeSource="{RelativeSource AncestorType=Grid}" Path="ActualWidth"/>
                                            </MultiBinding>
                                        </Border.Width>
                                        <Border.Background>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                                <GradientStop Color="#6E56CF" Offset="0"/>
                                                <GradientStop Color="#8B5CF6" Offset="1"/>
                                            </LinearGradientBrush>
                                        </Border.Background>
                                    </Border>
                                </Grid>

                                <!-- Progress info -->
                                <Grid Margin="0,0,0,12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel>
                                        <TextBlock Text="{Binding DownloadStatusText}"
                                                   FontSize="12"
                                                   Foreground="{StaticResource Zinc200Brush}"/>
                                        <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                                            <TextBlock Text="{Binding DownloadSpeedText}"
                                                       FontSize="11"
                                                       Foreground="{StaticResource Zinc500Brush}"/>
                                            <TextBlock Text=" - "
                                                       FontSize="11"
                                                       Foreground="{StaticResource Zinc600Brush}"
                                                       Visibility="{Binding DownloadTimeRemaining, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                                            <TextBlock FontSize="11" Foreground="{StaticResource Zinc500Brush}">
                                                <Run Text="{Binding DownloadTimeRemaining}"/>
                                                <Run Text=" remaining"/>
                                            </TextBlock>
                                        </StackPanel>
                                    </StackPanel>

                                    <TextBlock Grid.Column="1"
                                               FontSize="14"
                                               FontWeight="SemiBold"
                                               Foreground="{StaticResource Zinc100Brush}"
                                               VerticalAlignment="Center">
                                        <Run Text="{Binding DownloadProgress, StringFormat={}{0:F0}}"/><Run Text="%"/>
                                    </TextBlock>
                                </Grid>

                                <!-- Cancel button -->
                                <Button Style="{StaticResource SecondaryButton}"
                                        Command="{Binding DownloadModelCommand}"
                                        Content="Cancel"
                                        HorizontalAlignment="Left"
                                        Padding="16,8"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- MICROPHONE -->
                    <TextBlock Text="MICROPHONE"
                               FontSize="10"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource Zinc600Brush}"
                               Margin="0,0,0,10"/>

                    <Border Background="{StaticResource Zinc900Brush}"
                            CornerRadius="10"
                            Padding="14"
                            Margin="0,0,0,20">
                        <StackPanel>
                            <ComboBox ItemsSource="{Binding AudioDevices}"
                                      SelectedItem="{Binding SelectedAudioDevice}"
                                      DisplayMemberPath="Name"
                                      Margin="0,0,0,14"/>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Button Style="{StaticResource SecondaryButton}"
                                        Command="{Binding TestMicrophoneCommand}"
                                        Padding="16,10"
                                        Margin="0,0,12,0">
                                    <TextBlock FontSize="12">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Text" Value="Test"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding IsTesting}" Value="True">
                                                        <Setter Property="Text" Value="Stop"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </Button>

                                <Border Grid.Column="1"
                                        Height="36"
                                        Background="{StaticResource Zinc800Brush}"
                                        CornerRadius="6"
                                        Padding="4">
                                    <Border CornerRadius="4"
                                            Background="#10B981"
                                            HorizontalAlignment="Left"
                                            Width="{Binding TestAudioLevel, Converter={StaticResource LevelToWidthConverter}}"/>
                                </Border>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- LANGUAGE -->
                    <TextBlock Text="LANGUAGE"
                               FontSize="10"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource Zinc600Brush}"
                               Margin="0,0,0,10"/>

                    <Border Background="{StaticResource Zinc900Brush}"
                            CornerRadius="10"
                            Padding="14"
                            Margin="0,0,0,20">
                        <StackPanel>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="Transcription language"
                                           FontSize="13"
                                           Foreground="{StaticResource Zinc200Brush}"
                                           VerticalAlignment="Center"/>
                                <ComboBox Grid.Column="1"
                                          ItemsSource="{Binding AvailableLanguages}"
                                          SelectedItem="{Binding SelectedLanguage}"
                                          Width="100"/>
                            </Grid>
                            <TextBlock Text="Select 'auto' for automatic detection, or choose a specific language for better accuracy."
                                       FontSize="10"
                                       Foreground="{StaticResource Zinc600Brush}"
                                       TextWrapping="Wrap"
                                       Margin="0,10,0,0"/>
                        </StackPanel>
                    </Border>

                    <!-- BEHAVIOR -->
                    <TextBlock Text="BEHAVIOR"
                               FontSize="10"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource Zinc600Brush}"
                               Margin="0,0,0,10"/>

                    <Border Background="{StaticResource Zinc900Brush}"
                            CornerRadius="10"
                            Padding="14"
                            Margin="0,0,0,20">
                        <StackPanel>
                            <CheckBox Content="Copy to clipboard"
                                      IsChecked="{Binding CopyToClipboard}"
                                      Margin="0,0,0,12"/>
                            <CheckBox Content="Auto-paste at cursor"
                                      IsChecked="{Binding AutoPaste}"
                                      Margin="0,0,0,12"/>
                            <CheckBox Content="Show notification"
                                      IsChecked="{Binding ShowNotification}"
                                      Margin="0,0,0,12"/>
                            <CheckBox Content="Lower volume while recording"
                                      IsChecked="{Binding DuckVolumeWhileRecording}"
                                      ToolTip="Reduce system volume during recording to prevent audio interference"
                                      Margin="0,0,0,8"/>

                            <!-- Volume duck level control - only visible when duck is enabled -->
                            <Grid Margin="24,0,0,12"
                                  Visibility="{Binding DuckVolumeWhileRecording, Converter={StaticResource BooleanToVisibilityConverter}}">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <TextBlock Text="Volume level"
                                           FontSize="12"
                                           Foreground="{StaticResource Zinc400Brush}"
                                           VerticalAlignment="Center"/>

                                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                                    <!-- Decrease button -->
                                    <Button Style="{StaticResource IconButton}"
                                            Command="{Binding DecreaseVolumeDuckLevelCommand}"
                                            Width="28" Height="28"
                                            ToolTip="Decrease (quieter)">
                                        <Path Data="M4,12 L20,12"
                                              Stroke="{StaticResource Zinc400Brush}"
                                              StrokeThickness="2"
                                              Width="12" Height="12"
                                              Stretch="Uniform"/>
                                    </Button>

                                    <!-- Value display -->
                                    <Border Background="{StaticResource Zinc800Brush}"
                                            CornerRadius="4"
                                            Padding="12,4"
                                            Margin="4,0">
                                        <TextBlock FontSize="12"
                                                   FontFamily="{StaticResource FontMono}"
                                                   Foreground="{StaticResource Zinc200Brush}"
                                                   MinWidth="32"
                                                   TextAlignment="Center">
                                            <Run Text="{Binding VolumeDuckPercent}"/><Run Text="%"/>
                                        </TextBlock>
                                    </Border>

                                    <!-- Increase button -->
                                    <Button Style="{StaticResource IconButton}"
                                            Command="{Binding IncreaseVolumeDuckLevelCommand}"
                                            Width="28" Height="28"
                                            ToolTip="Increase (louder)">
                                        <Path Data="M12,4 L12,20 M4,12 L20,12"
                                              Stroke="{StaticResource Zinc400Brush}"
                                              StrokeThickness="2"
                                              Width="12" Height="12"
                                              Stretch="Uniform"/>
                                    </Button>
                                </StackPanel>
                            </Grid>

                            <CheckBox Content="Use GPU acceleration (CUDA)"
                                      IsChecked="{Binding UseGpu}"
                                      ToolTip="Enable GPU acceleration for faster transcription. Requires NVIDIA GPU with CUDA."/>
                        </StackPanel>
                    </Border>

                    <!-- SHORTCUT -->
                    <TextBlock Text="SHORTCUT"
                               FontSize="10"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource Zinc600Brush}"
                               Margin="0,0,0,10"/>

                    <Border Background="{StaticResource Zinc900Brush}"
                            CornerRadius="10"
                            Padding="14">
                        <StackPanel>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <TextBlock Text="Toggle recording"
                                           FontSize="13"
                                           Foreground="{StaticResource Zinc200Brush}"
                                           VerticalAlignment="Center"/>

                                <Border Grid.Column="1"
                                        Cursor="Hand"
                                        MouseLeftButtonUp="HotkeyBox_Click">
                                    <Border.Style>
                                        <Style TargetType="Border">
                                            <Setter Property="Background" Value="{StaticResource Zinc800Brush}"/>
                                            <Setter Property="BorderThickness" Value="2"/>
                                            <Setter Property="BorderBrush" Value="Transparent"/>
                                            <Setter Property="CornerRadius" Value="6"/>
                                            <Setter Property="Padding" Value="12,6"/>
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Background" Value="{StaticResource Zinc700Brush}"/>
                                                </Trigger>
                                                <DataTrigger Binding="{Binding IsRecordingHotkey}" Value="True">
                                                    <Setter Property="BorderBrush" Value="#6E56CF"/>
                                                    <Setter Property="Background" Value="{StaticResource Zinc800Brush}"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Border.Style>
                                    <TextBlock Text="{Binding HotkeyText}"
                                               FontFamily="{StaticResource FontMono}"
                                               FontSize="12">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Foreground" Value="{StaticResource Zinc400Brush}"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding IsRecordingHotkey}" Value="True">
                                                        <Setter Property="Foreground" Value="#8B5CF6"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </Border>
                            </Grid>

                            <TextBlock Text="Click the box above and press your desired key combination (requires at least one modifier: Ctrl, Alt, Shift, or Win)"
                                       FontSize="10"
                                       Foreground="{StaticResource Zinc600Brush}"
                                       TextWrapping="Wrap"
                                       Margin="0,10,0,0"/>
                        </StackPanel>
                    </Border>

                </StackPanel>
            </ScrollViewer>

            <!-- Footer -->
            <Border Grid.Row="2"
                    Padding="20,16"
                    BorderThickness="0,1,0,0"
                    BorderBrush="{StaticResource Zinc800Brush}">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Style="{StaticResource SecondaryButton}"
                            Content="Cancel"
                            Command="{Binding CancelCommand}"
                            Width="88"
                            Margin="0,0,12,0"/>
                    <Button Style="{StaticResource PrimaryButton}"
                            Content="Save"
                            Command="{Binding SaveCommand}"
                            Width="88"
                            Padding="16,10"/>
                </StackPanel>
            </Border>
        </Grid>
    </Border>
</Window>
